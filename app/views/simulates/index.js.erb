Simulator.clear( true );
Simulator.stage_type = "<%= @stage_type %>"
console.log('create map =>');
<% @obj_list.each do |obj| %>
	var x, y;
	console.log("create =>");
	var test = <%= obj.to_json.html_safe %>
	console.log(test);
	x = <%= obj[:x] %>
	y = <%= obj[:y] %>
	<% case obj[:type] %>
	<% when :server %>
		Node.create(x, y, 'server');
	<% when :start %>
		Node.create( x, y, 'start' );
	<% when :end %>
		Node.create( x, y, 'end' );
	<% when :user %>
		Node.create(x, y, 'user', { type: 'normal' } );
	<% when :tree %>
		Tree.create( x, y );
	<% when :road %>
		Street.create(x, y);
	<% when :car %>
		Node.create(x, y, 'car', { type: 'normal' } );
	<% else %>	
	<% end %>
<% end %>

console.log('stage_type => ', Simulator.stage_type);